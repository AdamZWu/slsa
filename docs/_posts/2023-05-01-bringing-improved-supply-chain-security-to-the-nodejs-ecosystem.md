---
title: "Bringing Improved Supply Chain Security to the Node.js Ecosystem"
author: "Ian Lewis, Laurent Simon"
is_guest_post: false
---

It has been a big month for supply chain security!
[GitHub recently announced the public beta](https://github.blog/2023-04-19-introducing-npm-package-provenance/)
for npm package provenance. This adds new functionality to npmjs.com and the npm
CLI that allows package maintainers to generate and upload SLSA Build Level 2
provenance along with their packages. Integration with
[Sigstore](https://www.sigstore.dev/) enables verification of signature and
certificate metadata so users know that the package came from the expected
source repository.

The SLSA Tooling SIG has been collaborating with GitHub to give npm package
authors more options to further harden builds. As a part of that collaboration,
we are announcing the beta of the
[SLSA3 Node.js builder for GitHub Actions](https://github.com/slsa-framework/slsa-github-generator/tree/main/internal/builders/nodejs).
The Node.js builder provides a
[GitHub Actions reusable workflow](https://docs.github.com/en/actions/using-workflows/reusing-workflows)
that can be called to perform the build, generate SLSA Build L3 compliant
provenance, and publish it to the npm registry along with the package.

Given that npm and Node.js are one of the largest open source ecosystems, we
believe these announcements go a long way towards improving supply chain
security for open source overall. As packages adopt SLSA provenance, we hope
that npm can serve as a model for more open source ecosystems in the future.

## Major Steps in Securing the OSS Supply Chain

GitHub's first-class support for package provenance in npm is a major step
forward in Open Source supply chain security for a number of reasons.

First, it provides a way for package maintainers to generate provenance for
their packages with minimal changes to their development workflows. This allows
busy Open Source developers to get large supply chain security gains with only a
small time investment.

Second, it provides a natural way to host provenance along with the package
itself. This takes advantage of existing package tooling to transparently
distribute provenance to users so it can be verified easily.

Third, Verification can be easily incorporated into the user's normal workflow
via the `npm audit signatures` command. Provenance adds the most value if it can
be verified before install. Support for verification in the `npm` CLI makes this

With this new support the provenance generated by npm projects achieves
[SLSA Build Level 2](https://slsa.dev/spec/v1.0/levels#build-l2). SLSA Build L2
gives projects a huge boost to software supply chain integrity of npm packages.
It prevents tampering after the build with digital signatures, reduces the
attack surface to one that can be more easily audited and hardened, and allows
for easier migration to more hardened SLSA Build levels in the future.

## Going Farther with SLSA on GitHub Actions

[SLSA Build L3](https://slsa.dev/spec/v1.0/levels#build-l3-hardened-builds)
improves upon SLSA Build L2 by further hardening the build process by preventing
build runs from influencing one another, and preventing secret material used to
sign the provenance from being accessible to the build steps.

These advantages are important because package installs and builds can run
untrusted and potentially compromised code from dependencies and other sources.
While it does require a specific attack, this in turn could allow attackers to
leak private keys or modify the provenance. As we have seen
[in](https://github.com/advisories/GHSA-pjwm-rvh2-c87w)
[the](https://github.com/advisories/GHSA-73qr-pfmq-6rp8)
[past](https://github.com/advisories/GHSA-g2q5-5433-rhrf), open source packages
are not immune to these targeted attacks.

The Node.js builder, built in collaboration with GitHub, does this by executing
the build and generation and signing of provenance in separate job steps
separated by a virtual machine (VM) security boundary provided by
[GitHub-hosted runners](https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners).

Using the Node.js builder is as easy as making a GitHub Actions reusable
workflow call. Most packages can slot this into their workflows fairly
seamlessly.

```yaml
jobs:
  build:
    permissions:
      actions: read # for detecting the Github Actions environment.
      id-token: write # for creating OIDC tokens for signing.
      packages: write # for uploading attestations.
    if: startsWith(github.ref, 'refs/tags/')
    uses: slsa-framework/slsa-github-generator/.github/workflows/builder_nodejs_slsa3.yml@v1.6.0
    with:
      run-scripts: "ci, build"
    secrets:
      node-auth-token: {% raw %}${{ secrets.NPM_TOKEN }{% endraw %}}
```

Find out more about the Node.js builder in the
[documentation](https://github.com/slsa-framework/slsa-github-generator/tree/main/internal/builders/nodejs).

## The value of cooperation

Support for SLSA provenance in the npm public registry is a great step forward
for improving the supply chain security of open-source projects. As we move
forward, improved support for supply chain security and cooperation with
programming language ecosystems is vital and we are looking forward to working
with more ecosystems in the future.

Please try out the new
[Node.js builder](https://github.com/slsa-framework/slsa-github-generator/tree/main/internal/builders/nodejs)
and let us know what you think by opening an
[issue](https://github.com/slsa-framework/slsa-github-generator/issues) on
GitHub. You can also ask a question in the
[#slsa-tooling](https://openssf.slack.com/archives/C03PDLFET5W) channel in the
[OpenSSF community slack](https://slack.openssf.org/). We would love to hear
from you! You can follow along with the development of the Node.js builder's GA
release via our development
[milestone](https://github.com/slsa-framework/slsa-github-generator/milestone/17).

See you soon!
